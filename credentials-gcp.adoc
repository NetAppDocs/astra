---
sidebar: sidebar
permalink: credentials-gcp.html
summary: Learn how to create or locate existing GCP credentials so that you can use Project Astra.
---

= Google Cloud Platform (GCP) Credentials
:imagesdir: assets/gcp-credentials/

Project Astra requires that you have a Google Cloud Platform (GCP) project and service account. The service account needs permissions to access specific Google Cloud APIs. This allows Project Astra to interact with GCP resources such as Google Kubernetes Engine (GKE) clusters and NetApp Cloud Volumes Service (CVS) storage.

Instead of providing a username and password to Project Astra, you will create a service account key. The service account key is plaintext stored in the JavaScript Object Notation (JSON) format. It contains information about the GCP resources you have permission to access. You can either create a new GCP project, or generate a new service account key inside an existing GCP project.

== Create a New Set of GCP Credentials

To create a new set of GCP credentials you will need to:

1. Create or Sign in to your Google account.
2. Create a new project or use an existing one.
3. Enable specific Google Cloud APIs.
4. Create and save a service account key.

=== Create a New Project

Log into the https://console.cloud.google.com[Google Cloud Console]. Click *Select a Project* on the top left navigation bar.

image::click-project.png[Google Container Engine: Click Project]

In the pop-up window which appears, click *NEW PROJECT* to create a new project.

Fill in "Astra" as the Project name, select the organization you want to use, then click *CREATE* to create the project.

image::create-new-project.png[Create new GCP project]

It may take a few moments for the project to be created. After the task is complete, you will be redirected to your dashboard.

=== Enable APIs

Next, use the API Manager to enable the APIs used by Project Astra.. From the https://console.cloud.google.com[Google Cloud Console], click *APIs & Services > Dashboard*.

image::click-api-manager.png[Google Container Engine: API Manager]

This takes you to the API Manager Dashboard. Click *+ENABLE APIS AND SERVICES*.

image::enable-api.png[GCP: Enable API]

This takes you to the API Library.

image::api-library-search.png[GCP API Library Search]

First, search for *Kubernetes*. The returned search results should include "Google Kubernetes Engine", and "NetApp Cloud Volumes Service". Both of those should be "Enabled" by clicking into them and pressing *Enable*.

image::api-library-search-kubernetes.png[GCP API Search Kubernetes]

Repeat the process only this time the search term is *Storage*. Enable both "Cloud Storage" and "Cloud Storage JSON API"

image::api-library-search-storage.png[GCP API Search Storage]

Finally search for and enable the *Service Usage* API:

image::api-library-search-service-usage.png[GCP API Search Service Usage]


=== Create Credentials and Service Account

After you create the new project, you will be redirected to the Google Compute Engine API Overview page. (*APIs and Services > Credentials*)

Click *+ CREATE CREDENTIALS* to create credentials.

image::create-credentials.png[Google Container Engine: Create Credentials]

Choose *Service account* from the drop-down menu which appears.

Fill in the new Service account name, ID, and description for the Service account you want to create for this project. Click *CREATE* to continue.

Next, grant this Service account permissions for your project. Select a role, then click *Continue* to continue.

The four roles that are needed for Project Astra are:

1. Kubernetes Engine Admin - To list clusters and manage apps.
2. Cloud Volumes Admin - To manage persistent storage for apps.
3. Storage Admin - To create storage buckets and objects for app backup.
4. Services Usage - To check if required APIs are enabled.


On the final step, *Grant users access to this service account (optional)* click *+ CREATE KEY* to create a private key.

image::optional-create-key.png[Create key]

Select `JSON` as the key type. Click *CREATE* to download the JSON credentials to your local workstation.

image::create-service-account-key.png[Google Container Engine: Service account key]

When you register a new cluster with Project Astra, find this `.json` file on your local workstation and upload it. You also have the option to open the file with a plaintext editor. Then copy and paste the contents of this key into the field of the registration workflow.

== Find Your Existing GCP Credentials

You can only view or download the Service Account key (JSON) file when you create the key. However, you can create a new key at any time.

=== Create a New Service Account Key

Log in to the https://console.cloud.google.com[Google cloud console]. Click *IAM & Admin > Service Accounts*.

image::iam-service-accounts.png[GCP IAM Service Accounts]

Click the Service Account for which you need to generate a new key.

image::select-service-account.png[GCP Select Service Account]

On the Service account details page, click *CREATE KEY*.

image::create-key.png[GCP Create Key]

Select `JSON` as the key type. Click *CREATE* to download the JSON credentials.

image::create-service-account-key.png[GCP Service account key]

When you register a new cluster with Project Astra, find this `.json` file on your local workstation and upload it. You also have the option to open the file with a plaintext editor. Then copy and paste the contents of this key into the field of the registration workflow.

(C)2020 NetApp, Inc. All rights reserved.
— NETAPP CONFIDENTIAL —
NetApp Confidential Information Subject to the Mutual Nondisclosure Agreement
All information disclosed in this document is furnished in confidence by NetApp to you with the understanding that it is NetApp confidential information pursuant to the Mutual Nondisclosure Agreement between the parties and shall be treated as such by you. The information provided in this document is for exploratory purposes only and is subject to change without notice and without liability or obligation to NetApp. NetApp retains all right, title, and interest in and to all information contained in this document, all derivative works of such information and all intellectual property rights embodied therein.
